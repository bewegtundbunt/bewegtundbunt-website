<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>bewegt & bunt â€“ App</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/dist/umd/supabase.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700;800&display=swap" rel="stylesheet" />
<style>
:root {
  --green-darkest: #287736;
  --green-dark:    #2CB52C;
  --green-light:   #92FEBB;
  --green-pale:    #B0E04B;
  --green-bg:      #e8f5e2;
  --cream:         #f5fbf2;
  --dark:          #1a2e1e;
  --grey:          #5a6e5d;
  --border:        #d4e8d4;
  --radius:        16px;
  --shadow:        0 4px 24px rgba(0,0,0,0.08);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: 'Sora', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--cream);
  min-height: 100vh;
  color: var(--dark);
  -webkit-font-smoothing: antialiased;
}
.screen { display: none; }

/* â•â• LOGIN â•â• */
#screen-login {
  background: var(--dark);
  min-height: 100vh;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem 1rem;
  position: relative;
  overflow: hidden;
}
#screen-login::before {
  content: '';
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 60% 60% at 20% 30%, #28773640 0%, transparent 70%),
    radial-gradient(ellipse 50% 60% at 80% 70%, #B0E04B15 0%, transparent 70%);
  pointer-events: none;
}
.logo-login { text-align: center; margin-bottom: 2rem; position: relative; z-index: 1; }
.logo-login img { width: 80px; height: auto; filter: brightness(0) invert(1); opacity: 0.9; }
.logo-login-name { font-size: 1.5rem; font-weight: 800; color: var(--green-light); margin-top: 0.5rem; letter-spacing: -0.02em; }
.logo-login-sub { font-size: 0.78rem; color: #6a9a6c; margin-top: 0.2rem; }
.login-card {
  background: rgba(255,255,255,0.97);
  padding: 2.5rem 2rem;
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  width: 100%; max-width: 380px;
  position: relative; z-index: 1;
}
.login-card h1 { font-size: 1.35rem; font-weight: 800; color: var(--dark); margin-bottom: 0.3rem; }
.card-sub { font-size: 0.82rem; color: #6a8a6c; margin-bottom: 1.8rem; }
.tabs { display: flex; margin-bottom: 1.5rem; background: var(--green-bg); border-radius: 10px; padding: 4px; }
.tab-btn {
  flex: 1; padding: 0.5rem; border: none; background: transparent;
  border-radius: 7px; font-size: 0.83rem; font-weight: 600;
  color: var(--dark); cursor: pointer; font-family: inherit; transition: all 0.2s;
}
.tab-btn.active { background: var(--green-darkest); color: #fff; }
.form-group { margin-bottom: 1rem; }
.form-label { display: block; font-size: 0.72rem; font-weight: 700; color: #5a6e5d; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.4rem; }
.form-input {
  width: 100%; padding: 0.75rem 1rem; border-radius: 10px;
  border: 1.5px solid #d4e8d4; font-size: 0.95rem; font-family: inherit;
  color: var(--dark); transition: border-color 0.2s; background: #fff;
}
.form-input:focus { outline: none; border-color: var(--green-darkest); }
.btn-submit {
  width: 100%; padding: 0.85rem; border: none; border-radius: 12px;
  font-size: 0.98rem; font-weight: 700; font-family: inherit; cursor: pointer;
  background: linear-gradient(135deg, var(--green-darkest), #2CB52C);
  color: white; transition: opacity 0.2s, transform 0.2s;
  box-shadow: 0 4px 16px #28773640; margin-top: 0.5rem;
}
.btn-submit:hover { opacity: 0.92; transform: translateY(-1px); }
.btn-submit:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
.login-message { margin-top: 1rem; padding: 0.7rem 0.9rem; border-radius: 8px; font-size: 0.83rem; display: none; }
.login-message.error { display: block; background: #fef2f2; border: 1px solid #fca5a5; color: #b91c1c; }
.login-message.success { display: block; background: #f0fdf4; border: 1px solid #86efac; color: #166534; }
.card-footer { margin-top: 1.2rem; text-align: center; font-size: 0.72rem; color: #8a9e8c; }

/* â•â• TOPBAR â•â• */
.topbar {
  background: var(--dark); color: #fff;
  padding: 0.85rem 1.5rem;
  display: flex; align-items: center; justify-content: space-between;
  position: sticky; top: 0; z-index: 100;
  box-shadow: 0 2px 12px rgba(0,0,0,0.3);
}
.topbar-logo-area { display: flex; align-items: center; gap: 0.6rem; }
.topbar-logo-img { width: 32px; height: auto; filter: brightness(0) invert(1); opacity: 0.9; }
.topbar-logo-txt { font-size: 1rem; font-weight: 800; color: var(--green-light); }
.topbar-right { display: flex; gap: 0.8rem; align-items: center; }
.topbar-link { color: #9ec49e; text-decoration: none; font-size: 0.8rem; font-weight: 600; transition: color 0.2s; cursor: pointer; }
.topbar-link:hover { color: var(--green-light); }
.btn-topbar-pill {
  background: rgba(255,255,255,0.12); border: 1px solid rgba(255,255,255,0.2);
  color: #fff; padding: 0.35rem 0.9rem; border-radius: 100px; font-size: 0.78rem; font-weight: 600;
  cursor: pointer; transition: background 0.2s;
}
.btn-topbar-pill:hover { background: rgba(255,255,255,0.22); }

/* â•â• BREADCRUMB â•â• */
.breadcrumb {
  padding: 0.65rem 1.5rem;
  background: #fff; border-bottom: 1px solid var(--border);
  font-size: 0.77rem; color: var(--grey);
  display: flex; gap: 0.4rem; align-items: center; flex-wrap: wrap;
}
.bc-link { cursor: pointer; color: var(--green-darkest); font-weight: 700; }
.bc-link:hover { text-decoration: underline; }
.bc-sep { color: #c0d4c0; }
.bc-cur { color: var(--grey); font-weight: 400; }

/* â•â• MAIN â•â• */
.main { max-width: 820px; margin: 0 auto; padding: 2rem 1.2rem; }

/* â•â• BEREICH-WAHL â•â• */
.screen-title { font-size: 1.4rem; font-weight: 800; color: var(--dark); margin-bottom: 0.3rem; }
.screen-sub { font-size: 0.87rem; color: var(--grey); margin-bottom: 1.8rem; }

.bereich-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.2rem; }
.bereich-card {
  background: #fff; border-radius: var(--radius);
  border: 2px solid var(--border); padding: 2rem 1.5rem; cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
  text-align: center; position: relative; overflow: hidden;
}
.bereich-card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px;
  background: linear-gradient(90deg, var(--green-darkest), var(--green-dark));
  opacity: 0; transition: opacity 0.2s;
}
.bereich-card:hover::before { opacity: 1; }
.bereich-card:hover { transform: translateY(-4px); box-shadow: 0 16px 40px #28773622; border-color: var(--green-darkest); }
.bereich-icon { font-size: 2.8rem; margin-bottom: 0.8rem; }
.bereich-title { font-size: 1.2rem; font-weight: 800; color: var(--dark); margin-bottom: 0.3rem; }
.bereich-age {
  display: inline-block; font-size: 0.7rem; font-weight: 700;
  color: var(--green-darkest); background: var(--green-bg);
  padding: 0.18rem 0.7rem; border-radius: 100px; margin-bottom: 0.5rem;
}
.bereich-desc { font-size: 0.8rem; color: var(--grey); line-height: 1.5; }

/* â•â• ZEIT-WAHL â•â• */
.zeit-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; }
.zeit-card {
  background: #fff; border-radius: var(--radius);
  border: 2px solid var(--border); padding: 1.8rem 1.2rem; cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
  text-align: center;
}
.zeit-card:hover { transform: translateY(-4px); box-shadow: 0 12px 32px #28773622; border-color: var(--green-darkest); }
.zeit-icon { font-size: 2.2rem; margin-bottom: 0.6rem; }
.zeit-min { font-size: 1.8rem; font-weight: 800; color: var(--green-darkest); }
.zeit-label { font-size: 0.78rem; color: var(--grey); margin-top: 0.2rem; }
.zeit-count { margin-top: 0.7rem; display: inline-block; font-size: 0.68rem; font-weight: 700; color: var(--green-darkest); background: var(--green-bg); padding: 0.18rem 0.6rem; border-radius: 100px; }

/* â•â• GENERATOR â•â• */
.gen-card {
  background: #fff; border-radius: var(--radius);
  box-shadow: var(--shadow); padding: 1.6rem; margin-bottom: 1.8rem;
}
.gen-label { font-weight: 700; font-size: 0.73rem; color: var(--grey); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.4rem; display: block; }
.gen-select {
  width: 100%; padding: 0.7rem 0.85rem; border-radius: 10px;
  border: 1.5px solid var(--border); font-size: 0.92rem; font-family: inherit;
  color: var(--dark); background: #fff; transition: border-color 0.2s; margin-bottom: 1rem;
}
.gen-select:focus { outline: none; border-color: var(--green-darkest); }
.btn-generate {
  width: 100%; padding: 0.88rem 1.5rem;
  background: linear-gradient(135deg, var(--green-darkest), #2CB52C);
  color: white; border: none; border-radius: 12px; cursor: pointer;
  font-size: 0.97rem; font-weight: 700; font-family: inherit;
  display: flex; align-items: center; justify-content: center; gap: 8px;
  transition: opacity 0.2s, transform 0.2s; box-shadow: 0 4px 16px #28773640;
}
.btn-generate:hover:not(:disabled) { opacity: 0.9; transform: translateY(-2px); }
.btn-generate:disabled { opacity: 0.55; cursor: not-allowed; }
.spinner {
  width: 15px; height: 15px; border: 2px solid rgba(255,255,255,0.4);
  border-top-color: white; border-radius: 50%;
  animation: spin 0.7s linear infinite; display: none;
}
.btn-generate.loading .spinner { display: block; }
@keyframes spin { to { transform: rotate(360deg); } }
#gen-status { margin-top: 0.75rem; padding: 0.7rem 0.9rem; border-radius: 10px; font-size: 0.83rem; display: none; }
#gen-status.success { display: block; background: #f0fdf4; border: 1px solid #86efac; color: #166534; }
#gen-status.error { display: block; background: #fef2f2; border: 1px solid #fca5a5; color: #b91c1c; }

/* â•â• RESULT â•â• */
#result { display: none; }
.result-topbar {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 1.1rem; flex-wrap: wrap; gap: 0.5rem;
}
.result-topbar h2 { font-size: 1.25rem; font-weight: 800; }
.btn-print {
  background: var(--green-darkest); color: #fff; border: none;
  padding: 0.5rem 1.1rem; border-radius: 100px;
  font-size: 0.82rem; font-weight: 700; cursor: pointer; font-family: inherit;
}
.btn-print:hover { opacity: 0.85; }
.r-card { background: #fff; border: 1px solid var(--border); border-radius: 14px; padding: 1.2rem 1.4rem; margin-bottom: 1rem; }
.r-card-title { font-size: 0.66rem; text-transform: uppercase; letter-spacing: 0.12em; color: var(--green-darkest); font-weight: 700; margin-bottom: 0.9rem; }
.meta-row { display: flex; flex-wrap: wrap; gap: 0.55rem; }
.meta-chip {
  background: var(--cream); border: 1px solid var(--border);
  border-radius: 10px; padding: 0.45rem 0.85rem;
  display: flex; flex-direction: column; gap: 0.1rem;
}
.meta-chip .val { font-size: 1rem; font-weight: 800; color: var(--green-darkest); }
.meta-chip .key { font-size: 0.67rem; color: var(--grey); }
.tl-item { display: flex; gap: 0.8rem; padding: 0.7rem 0; border-bottom: 1px solid #eef6ee; }
.tl-item:last-child { border-bottom: none; }
.tl-time { font-size: 0.72rem; color: var(--grey); min-width: 60px; padding-top: 2px; font-weight: 600; line-height: 1.4; }
.tl-body { flex: 1; }
.tl-name { font-weight: 700; font-size: 0.9rem; }
.tl-badge { display: inline-block; font-size: 0.63rem; padding: 2px 7px; border-radius: 20px; background: var(--green-bg); color: var(--green-darkest); margin: 2px 0; font-weight: 700; }
.tl-mat { font-size: 0.72rem; color: var(--green-darkest); background: var(--green-bg); border-radius: 6px; padding: 2px 7px; display: inline-block; margin-top: 3px; }
.tl-desc { font-size: 0.81rem; color: #555; margin-top: 0.3rem; line-height: 1.55; }
.mat-wrap { display: flex; flex-wrap: wrap; gap: 0.38rem; }
.mat-chip { font-size: 0.8rem; background: var(--cream); border: 1px solid var(--border); border-radius: 8px; padding: 0.3rem 0.65rem; }
.tip-item { display: flex; gap: 0.5rem; padding: 0.4rem 0; border-bottom: 1px solid #eef6ee; font-size: 0.83rem; line-height: 1.5; }
.tip-item:last-child { border-bottom: none; }
.closing-quote {
  background: linear-gradient(135deg, var(--green-darkest), #1a5c20);
  color: #fff; border-radius: 14px; padding: 1.4rem 1.8rem;
  text-align: center; margin-bottom: 1rem;
}
.closing-quote blockquote { font-family: Georgia, serif; font-style: italic; font-size: 0.98rem; line-height: 1.7; color: #c8f0c8; }
.closing-quote .q-author { margin-top: 0.6rem; font-size: 0.75rem; color: var(--green-light); font-weight: 600; }

/* â•â• RESPONSIVE â•â• */
@media (max-width: 560px) {
  .bereich-grid { grid-template-columns: 1fr; }
  .topbar { padding: 0.7rem 1rem; }
  .main { padding: 1.3rem 0.9rem; }
  .topbar-logo-txt { display: none; }
}
@media print {
  .topbar, .breadcrumb, .gen-card, .btn-print, #gen-status, .screen-title, .screen-sub { display: none !important; }
  body { background: #fff; }
  .r-card { box-shadow: none; border: 1px solid #ccc; break-inside: avoid; }
  #result { display: block !important; }
}
</style>
</head>
<body>

<!-- â•â• LOGIN â•â• -->
<div id="screen-login">
  <div class="logo-login">
    <div style="font-size:2.5rem;">ğŸŒ¿</div>
    <div class="logo-login-name">bewegt &amp; bunt</div>
    <div class="logo-login-sub">Plattform fÃ¼r Kita-FachkrÃ¤fte</div>
  </div>
  <div class="login-card">
    <h1>Willkommen zurÃ¼ck</h1>
    <p class="card-sub">Melde dich an, um Bewegungsstunden zu erstellen.</p>
    <div class="tabs">
      <button class="tab-btn active" onclick="setTab('login',this)">Anmelden</button>
      <button class="tab-btn" onclick="setTab('signup',this)">Registrieren</button>
    </div>
    <div class="form-group">
      <label class="form-label">E-Mail</label>
      <input class="form-input" type="email" id="email" placeholder="deine@email.de" autocomplete="email" />
    </div>
    <div class="form-group">
      <label class="form-label">Passwort</label>
      <input class="form-input" type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" />
    </div>
    <button class="btn-submit" id="submitBtn" onclick="handleSubmit()">Anmelden</button>
    <div id="loginMessage" class="login-message"></div>
    <div class="card-footer">Zugang nur fÃ¼r freigeschaltete Kita-FachkrÃ¤fte<br><a href="https://bewegtundbunt.de" style="color:#6a9a6c;text-decoration:none;margin-top:0.5rem;display:inline-block;">â† Zur Website</a></div>
  </div>
</div>

<!-- â•â• HOME (Bereich wÃ¤hlen) â•â• -->
<div id="screen-home" class="screen">
  <div class="topbar">
    <div class="topbar-logo-area">
      <span style="font-size:1.4rem;">ğŸŒ¿</span>
      <span class="topbar-logo-txt">bewegt &amp; bunt</span>
    </div>
    <div class="topbar-right">
      <a href="https://bewegtundbunt.de" class="btn-topbar-pill">â† Website</a>
      <a class="topbar-link" onclick="logout()">Abmelden</a>
    </div>
  </div>
  <div class="main">
    <div class="screen-title">Hallo! ğŸ‘‹</div>
    <div class="screen-sub" id="userEmail">WÃ¤hle einen Bereich, um eine Bewegungseinheit zu starten.</div>
    <div class="bereich-grid">
      <div class="bereich-card" onclick="goBereich('krippe')">
        <div class="bereich-icon">ğŸ¼</div>
        <div class="bereich-title">Krippe</div>
        <div class="bereich-age">0 â€“ 3 Jahre</div>
        <div class="bereich-desc">Sanfte, sinnesorientierte Bewegungseinheiten fÃ¼r die Kleinsten.</div>
      </div>
      <div class="bereich-card" onclick="goBereich('kindergarten')">
        <div class="bereich-icon">ğŸ’</div>
        <div class="bereich-title">Kindergarten</div>
        <div class="bereich-age">3 â€“ 6 Jahre</div>
        <div class="bereich-desc">Strukturierte Bewegungsstunden mit Spielcharakter und sozialen Elementen.</div>
      </div>
    </div>
  </div>
</div>

<!-- â•â• KRIPPE â€“ Zeitwahl â•â• -->
<div id="screen-krippe-zeit" class="screen">
  <div class="topbar">
    <div class="topbar-logo-area"><span style="font-size:1.4rem;">ğŸŒ¿</span><span class="topbar-logo-txt">bewegt &amp; bunt</span></div>
    <div class="topbar-right">
      <span class="btn-topbar-pill" onclick="showScreen('screen-home')">â† ZurÃ¼ck</span>
      <a class="topbar-link" onclick="logout()">Abmelden</a>
    </div>
  </div>
  <div class="breadcrumb"><span class="bc-link" onclick="showScreen('screen-home')">Start</span><span class="bc-sep">â€º</span><span class="bc-cur">ğŸ¼ Krippe</span></div>
  <div class="main">
    <div class="screen-title">ğŸ¼ Krippe â€“ Dauer wÃ¤hlen</div>
    <div class="screen-sub">Wie lang soll die Bewegungseinheit dauern?</div>
    <div class="zeit-grid">
      <div class="zeit-card" onclick="goZeit('krippe',10)">
        <div class="zeit-icon">âš¡</div>
        <div class="zeit-min">10 min</div>
        <div class="zeit-label">Kurze Aktivierung</div>
        <div class="zeit-count">5 Vorlagen</div>
      </div>
      <div class="zeit-card" onclick="goZeit('krippe',20)">
        <div class="zeit-icon">ğŸŒ¿</div>
        <div class="zeit-min">20 min</div>
        <div class="zeit-label">Ausgedehnte Einheit</div>
        <div class="zeit-count">5 Vorlagen</div>
      </div>
    </div>
  </div>
</div>

<!-- â•â• KINDERGARTEN â€“ Zeitwahl â•â• -->
<div id="screen-kindergarten-zeit" class="screen">
  <div class="topbar">
    <div class="topbar-logo-area"><span style="font-size:1.4rem;">ğŸŒ¿</span><span class="topbar-logo-txt">bewegt &amp; bunt</span></div>
    <div class="topbar-right">
      <span class="btn-topbar-pill" onclick="showScreen('screen-home')">â† ZurÃ¼ck</span>
      <a class="topbar-link" onclick="logout()">Abmelden</a>
    </div>
  </div>
  <div class="breadcrumb"><span class="bc-link" onclick="showScreen('screen-home')">Start</span><span class="bc-sep">â€º</span><span class="bc-cur">ğŸ’ Kindergarten</span></div>
  <div class="main">
    <div class="screen-title">ğŸ’ Kindergarten â€“ Dauer wÃ¤hlen</div>
    <div class="screen-sub">Wie lang soll die Bewegungseinheit dauern?</div>
    <div class="zeit-grid">
      <div class="zeit-card" onclick="goZeit('kindergarten',15)">
        <div class="zeit-icon">âš¡</div>
        <div class="zeit-min">15 min</div>
        <div class="zeit-label">Kurze Aktivierung</div>
        <div class="zeit-count">5 Vorlagen</div>
      </div>
      <div class="zeit-card" onclick="goZeit('kindergarten',30)">
        <div class="zeit-icon">ğŸŒ¿</div>
        <div class="zeit-min">30 min</div>
        <div class="zeit-label">Standard-Einheit</div>
        <div class="zeit-count">5 Vorlagen</div>
      </div>
      <div class="zeit-card" onclick="goZeit('kindergarten',45)">
        <div class="zeit-icon">ğŸƒ</div>
        <div class="zeit-min">45 min</div>
        <div class="zeit-label">Erweiterte Einheit</div>
        <div class="zeit-count">5 Vorlagen</div>
      </div>
      <div class="zeit-card" onclick="goZeit('kindergarten',60)">
        <div class="zeit-icon">ğŸ¯</div>
        <div class="zeit-min">60 min</div>
        <div class="zeit-label">Volle Bewegungsstunde</div>
        <div class="zeit-count">5 Vorlagen</div>
      </div>
    </div>
  </div>
</div>

<!-- â•â• GENERATOR â•â• -->
<div id="screen-gen" class="screen">
  <div class="topbar">
    <div class="topbar-logo-area"><span style="font-size:1.4rem;">ğŸŒ¿</span><span class="topbar-logo-txt">bewegt &amp; bunt</span></div>
    <div class="topbar-right">
      <span class="btn-topbar-pill" id="gen-back-btn" onclick="genGoBack()">â† ZurÃ¼ck</span>
      <a class="topbar-link" onclick="logout()">Abmelden</a>
    </div>
  </div>
  <div class="breadcrumb" id="gen-bc"></div>
  <div class="main">
    <div class="screen-title" id="gen-title">Bewegungseinheit</div>
    <div class="screen-sub">Vorlage wird automatisch der Reihe nach abgerufen</div>
    <div class="gen-card">
      <label class="gen-label">Anzahl Kinder</label>
      <select class="gen-select" id="kinderAnzahl">
        <option value="5">5 Kinder</option>
        <option value="8">8 Kinder</option>
        <option value="10">10 Kinder</option>
        <option value="12" selected>12 Kinder</option>
        <option value="15">15 Kinder</option>
        <option value="20">20 Kinder</option>
        <option value="25">25 Kinder</option>
      </select>
      <button class="btn-generate" id="generateBtn" onclick="generate()">
        <div class="spinner"></div>
        <span id="btnText">â–¶ Bewegungseinheit generieren</span>
      </button>
      <div id="gen-status"></div>
    </div>
    <div id="result">
      <div class="result-topbar">
        <h2 id="result-title">Deine Bewegungseinheit</h2>
        <button class="btn-print" onclick="window.print()">ğŸ–¨ï¸ Drucken / PDF</button>
      </div>
      <div id="result-content"></div>
    </div>
  </div>
</div>

<script>
// â•â• SUPABASE â•â•
const SB_URL = "https://jhgoqrinhdtowuhzirnf.supabase.co";
const SB_KEY = "sb_publishable_uu0Xh8f_71Dk1qAQ_UirpQ_u-P4eSBG";
let sb;
try { sb = window.supabase.createClient(SB_URL, SB_KEY); } catch(e){}

// â•â• STATE â•â•
let curBereich = null, curDauer = null;
const counters = {};

// â•â• NAVIGATION â•â•
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
  const el = document.getElementById(id);
  el.style.display = id === 'screen-login' ? 'flex' : 'block';
  window.scrollTo(0,0);
}
function goBereich(b) {
  curBereich = b;
  showScreen(b === 'krippe' ? 'screen-krippe-zeit' : 'screen-kindergarten-zeit');
}
function goZeit(b, d) {
  curBereich = b; curDauer = d;
  const bl = b === 'krippe' ? 'ğŸ¼ Krippe' : 'ğŸ’ Kindergarten';
  const bs = b === 'krippe' ? 'screen-krippe-zeit' : 'screen-kindergarten-zeit';
  document.getElementById('gen-back-btn').dataset.back = bs;
  document.getElementById('gen-title').textContent = `${bl} Â· ${d} Minuten`;
  document.getElementById('result').style.display = 'none';
  document.getElementById('gen-status').className = '';
  document.getElementById('gen-status').textContent = '';
  const age = b === 'krippe' ? '0â€“3 J.' : '3â€“6 J.';
  document.getElementById('gen-bc').innerHTML =
    `<span class="bc-link" onclick="showScreen('screen-home')">Start</span>
     <span class="bc-sep">â€º</span>
     <span class="bc-link" onclick="showScreen('${bs}')">${bl} (${age})</span>
     <span class="bc-sep">â€º</span>
     <span class="bc-cur">${d} Minuten</span>`;
  showScreen('screen-gen');
}
function genGoBack() {
  showScreen(document.getElementById('gen-back-btn').dataset.back || 'screen-home');
}

// â•â• AUTH â•â•
(async () => {
  if (!sb) { showScreen('screen-login'); return; }
  const { data } = await sb.auth.getSession();
  if (data.session) { setUser(data.session.user.email); showScreen('screen-home'); }
  else showScreen('screen-login');
})();
sb?.auth.onAuthStateChange((_,s) => {
  if (s) { setUser(s.user.email); if (document.getElementById('screen-login').style.display!=='none') showScreen('screen-home'); }
});
function setUser(email) {
  document.getElementById('userEmail').textContent = `Angemeldet als ${email} Â· WÃ¤hle einen Bereich:`;
}
async function logout() {
  if (sb) await sb.auth.signOut();
  showScreen('screen-login');
}

// â•â• LOGIN â•â•
let curTab = 'login';
function setTab(t,btn) {
  curTab = t;
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('submitBtn').textContent = t==='login'?'Anmelden':'Registrieren';
}
function showLoginMsg(m,t) {
  const el = document.getElementById('loginMessage');
  if(!m){el.className='login-message';el.textContent='';return;}
  el.textContent=m; el.className=`login-message ${t}`;
}
async function handleSubmit() {
  const e = document.getElementById('email').value.trim();
  const p = document.getElementById('password').value;
  const btn = document.getElementById('submitBtn');
  if(!e||!p){showLoginMsg('Bitte E-Mail und Passwort eingeben.','error');return;}
  btn.disabled=true; btn.textContent='â€¦'; showLoginMsg('','');
  if(curTab==='login'){
    const {error}=await sb.auth.signInWithPassword({email:e,password:p});
    if(error){showLoginMsg(error.message,'error');btn.disabled=false;btn.textContent='Anmelden';}
  } else {
    const {error}=await sb.auth.signUp({email:e,password:p});
    if(error){showLoginMsg(error.message,'error');btn.disabled=false;btn.textContent='Registrieren';}
    else{showLoginMsg('Registrierung erfolgreich! Bitte E-Mail bestÃ¤tigen.','success');btn.disabled=false;btn.textContent='Registrieren';}
  }
}
document.addEventListener('keydown',e=>{if(e.key==='Enter'&&document.getElementById('screen-login').style.display!=='none')handleSubmit();});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  VORLAGEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const QUOTES = [
  {text:"Bewegung ist die Sprache, die alle Kinder sprechen â€“ lange bevor sie Worte kennen.",author:"Friedrich FrÃ¶bel"},
  {text:"Kinder brauchen keine perfekte Stunde â€“ sie brauchen jemanden, der mit ihnen in Bewegung bleibt.",author:"PÃ¤dagogische Weisheit"},
  {text:"Der KÃ¶rper ist das erste Zuhause, das ein Kind kennt. Lass es darin wohnen.",author:"Unbekannt"},
  {text:"Durch Spielen lernt das Kind, dass es die Welt gestalten kann.",author:"Maria Montessori"},
  {text:"Kinder lernen am besten, wenn sie sich bewegen â€“ denn Bewegung ist Denken in Aktion.",author:"Carla Hannaford"},
  {text:"Jede Bewegungsstunde ist eine Einladung: Trau dich, sei dabei, wachse.",author:"PÃ¤dagogische Weisheit"},
  {text:"Was im KÃ¶rper beginnt, findet seinen Weg in den Geist.",author:"Unbekannt"},
  {text:"Kinder, die sich bewegen dÃ¼rfen, denken klarer â€“ und lÃ¤cheln hÃ¤ufiger.",author:"SportpÃ¤dagogik"},
  {text:"Spielen ist die ernsteste BeschÃ¤ftigung der Kindheit.",author:"Charles Baudelaire"},
  {text:"Das Geheimnis guter PÃ¤dagogik liegt darin, die Begeisterung zu schÃ¼tzen.",author:"Unbekannt"},
  {text:"Bewegung und Spiel sind die Hauptarbeit des Kindes.",author:"Jean Piaget"},
  {text:"In jedem Kind steckt ein TÃ¤nzer â€“ man muss nur die Musik anmachen.",author:"Unbekannt"}
];
let qIdx=0;

const T = {
  krippe: {
    10: [
      {title:"Krabbelkreis & Kissenwerk",thema:"Grobmotorik Â· KÃ¶rpererfahrung",
       timeline:[
         {t:"Ankommen",typ:"EinfÃ¼hrung",v:0,b:2,desc:"Kreis auf der Matte. BegrÃ¼ÃŸung mit Namen. Gemeinsames Strecken.",mat:null},
         {t:"Warm-up: Robben & Krabbeln",typ:"Warm-up",v:2,b:5,desc:"Auf dem Bauch robben â†’ auf allen Vieren krabbeln â†’ aufrichten. Rhythmus vorgeben.",mat:null},
         {t:"Kissen-HÃ¼gel erklimmen",typ:"Hauptteil",v:5,b:8,desc:"3â€“4 Kissen als kleiner HÃ¼gel aufgestapelt. Kinder klettern drÃ¼ber, rollen runter.",mat:"4â€“5 groÃŸe Kissen Â· Weichmatte"},
         {t:"Ruhephase",typ:"Abschluss",v:8,b:10,desc:"Kinder legen sich auf Matten. Langsam ein- und ausatmen. Ruhige Musik.",mat:"Matten Â· Musik-Player"}
       ],
       materials:["4â€“5 groÃŸe Kissen","Weichmatte","Musik-Player"],
       tips:["Tempo sehr langsam halten","Kinder nie drÃ¤ngen","Viel Lob fÃ¼r jeden Versuch"]},
      {title:"Tuch-Tanz & Windspiel",thema:"Sensorik Â· Rhythmus",
       timeline:[
         {t:"TÃ¼cher vorstellen",typ:"EinfÃ¼hrung",v:0,b:2,desc:"Bunte TÃ¼cher ausgeteilt. Kinder befÃ¼hlen, wedeln, Ã¼ber den Kopf werfen.",mat:"Bunte TÃ¼cher (1 pro Kind)"},
         {t:"Warm-up: Tuch-Bewegungen",typ:"Warm-up",v:2,b:5,desc:"Tuch langsam schwingen Â· schnell wedeln Â· auf den Boden legen Â· wieder aufheben.",mat:"TÃ¼cher"},
         {t:"Tanz zur Musik",typ:"Hauptteil",v:5,b:8,desc:"Musik lÃ¤uft. Kinder bewegen Tuch und KÃ¶rper frei. Fachkraft macht vor: groÃŸ â€“ klein â€“ drehen.",mat:"TÃ¼cher Â· Musik-Player"},
         {t:"Tuch als Decke",typ:"Abschluss",v:8,b:10,desc:"Tuch Ã¼ber die Beine. Kurz innehalten, tief atmen. Stille.",mat:"TÃ¼cher Â· Matten"}
       ],
       materials:["Bunte TÃ¼cher (1 pro Kind)","Musik-Player","Matten"],
       tips:["Kein richtiges Falsch beim Tanzen","Sanfte Musik wÃ¤hlen (NaturklÃ¤nge)","Tuch-Kontakt beruhigt Krippe-Kinder"]},
      {title:"Ball-Entdecker",thema:"Auge-Hand-Koordination",
       timeline:[
         {t:"BÃ¤lle kennenlernen",typ:"EinfÃ¼hrung",v:0,b:2,desc:"Verschiedene weiche BÃ¤lle auf der Matte: groÃŸ, klein, rau, glatt. Kinder befÃ¼hlen & benennen.",mat:"4â€“5 verschiedene weiche BÃ¤lle"},
         {t:"Rollen & Rollen lassen",typ:"Warm-up",v:2,b:5,desc:"Ball hin und her rollen (Kind â†” Fachkraft). Arme fÃ¼hren lernen.",mat:"Weiche BÃ¤lle"},
         {t:"KÃ¶rper & Ball",typ:"Hauptteil",v:5,b:8,desc:"Igelball auf Bauch, RÃ¼cken, Beine rollen lassen. Dann Ball hochheben & fallen lassen.",mat:"IgelbÃ¤lle (1 pro Kind) Â· weiche BÃ¤lle"},
         {t:"Ball weglegen & strecken",typ:"Abschluss",v:8,b:10,desc:"BÃ¤lle gemeinsam sammeln. HÃ¤nde hochrecken, gÃ¤hnen, ausatmen.",mat:null}
       ],
       materials:["Verschiedene weiche BÃ¤lle (5â€“6)","IgelbÃ¤lle (1 pro Kind)","Weichmatte"],
       tips:["IgelbÃ¤lle stimulieren KÃ¶rperwahrnehmung","Kinder bestimmen Tempo selbst","Auf Ãœberreizung achten"]},
      {title:"Tierspaziergang",thema:"Imitation Â· Grobmotorik",
       timeline:[
         {t:"Welche Tiere kennen wir?",typ:"EinfÃ¼hrung",v:0,b:2,desc:"Kurzes GesprÃ¤ch: Tier-Bilder zeigen: Katze, Hund, Vogel. GerÃ¤usche nachmachen.",mat:"Tier-Bildkarten (optional)"},
         {t:"Tiere imitieren",typ:"Warm-up",v:2,b:5,desc:"Katze schleicht Â· Hund schnÃ¼ffelt Â· Vogel flattert.",mat:null},
         {t:"Tierparcours",typ:"Hauptteil",v:5,b:8,desc:"Fachkraft ruft Tier â€“ Kinder wechseln sofort. Geschwindigkeit variieren.",mat:null},
         {t:"Tiere schlafen",typ:"Abschluss",v:8,b:10,desc:"Alle Tiere machen ein Nickerchen auf der Matte. Augen zu, ruhig atmen.",mat:"Matten"}
       ],
       materials:["Tier-Bildkarten (optional)","Matten"],
       tips:["Einfache Tiere wÃ¤hlen (max. 3)","Tempo selbst vorgeben","Abschluss ruhig & langsam"]},
      {title:"BegrÃ¼ÃŸungsritual & KÃ¶rperreise",thema:"KÃ¶rperwahrnehmung Â· Soziales",
       timeline:[
         {t:"BegrÃ¼ÃŸungsritual",typ:"EinfÃ¼hrung",v:0,b:2,desc:"Im Kreis sitzen. Jedes Kind bekommt BegrÃ¼ÃŸung mit Handschlag oder Winken.",mat:null},
         {t:"KÃ¶rperteile entdecken",typ:"Warm-up",v:2,b:5,desc:"Fachkraft nennt KÃ¶rperteil â€“ Kinder tippen drauf. Nase, Ohren, Bauch, Knie, Zehen.",mat:null},
         {t:"Igelball-Massage",typ:"Hauptteil",v:5,b:8,desc:"Igelball Ã¼ber HÃ¤nde, Arme, Beine rollen. Kinder massieren sich selbst oder gegenseitig.",mat:"IgelbÃ¤lle (1 pro Kind)"},
         {t:"Verabschiedungsritual",typ:"Abschluss",v:8,b:10,desc:"Gemeinsam 3Ã— tief einatmen & ausatmen. Kurze Stille. Jedes Kind winkt zum Abschluss.",mat:null}
       ],
       materials:["IgelbÃ¤lle (1 pro Kind)","Matten"],
       tips:["Rituale geben Krippe-Kindern Sicherheit","Massage nur auf freiwilliger Basis","Gleiches Ritual jede Woche stÃ¤rkt Vertrauen"]}
    ],
    20: [
      {title:"GroÃŸer Kissen-Parcours",thema:"Grobmotorik Â· Gleichgewicht",
       timeline:[
         {t:"Ankommen & AufwÃ¤rmen",typ:"EinfÃ¼hrung",v:0,b:4,desc:"Kreis auf der Matte. BegrÃ¼ÃŸung. Gemeinsam dehnen: Arme hoch, seitlich, Knie ziehen.",mat:"Matten"},
         {t:"Warm-up: Tierwanderung",typ:"Warm-up",v:4,b:7,desc:"Als BÃ¤ren stampfen â†’ als MÃ¤use schleichen â†’ als VÃ¶gel flattern.",mat:null},
         {t:"Parcours: Kissen & Balken",typ:"Hauptteil",v:7,b:16,desc:"Station 1: Kissen-HÃ¼gel klettern (3 min) Â· Station 2: Linie entlanggehen (3 min) Â· Station 3: Durch Tunnel krabbeln (3 min). Kinder rotieren nach Signal.",mat:"6â€“8 Kissen Â· Klebebandlinie Â· Kriechtunnel Â· Weichmatte"},
         {t:"Entspannung",typ:"Abschluss",v:16,b:20,desc:"Auf Matten legen. Ruhige Musik. Kurze ruhige Geschichte.",mat:"Matten Â· Musik-Player"}
       ],
       materials:["6â€“8 groÃŸe Kissen","Kriechtunnel","Klebeband","Weichmatte","Musik-Player"],
       tips:["Stationen vor der Einheit aufbauen","Signalwechsel klar ankÃ¼ndigen","Kein Kind zur Teilnahme zwingen"]},
      {title:"Tuch & Rhythmus-Welt",thema:"Rhythmus Â· Sensorik Â· Soziales",
       timeline:[
         {t:"TÃ¼cher erkunden",typ:"EinfÃ¼hrung",v:0,b:3,desc:"TÃ¼cher ausgeteilt. Kinder erkunden: Farbe benennen, schwingen, werfen.",mat:"Bunte TÃ¼cher (1 pro Kind)"},
         {t:"Klatsch-Rhythmus",typ:"Warm-up",v:3,b:7,desc:"Einfache Klatschmuster: 1Ã—, 2Ã—, 3Ã—. Dann mit Stampfen kombinieren.",mat:null},
         {t:"Tanz-Einheit",typ:"Hauptteil",v:7,b:16,desc:"3 MusikstÃ¼cke Ã  ~3 min: Tuch langsam schwingen Â· Tuch schnell wedeln & laufen Â· Tuch auf Boden â€“ drÃ¼ber hÃ¼pfen. Pause zwischen Liedern.",mat:"TÃ¼cher Â· Musik-Player"},
         {t:"Tuch-Entspannung",typ:"Abschluss",v:16,b:20,desc:"Tuch Ã¼ber Beine. Auf Matte sitzen. Leise Musik. Gemeinsam atmen.",mat:"TÃ¼cher Â· Matten Â· Musik-Player"}
       ],
       materials:["Bunte TÃ¼cher (1 pro Kind)","Musik-Player (3 Lieder vorbereiten)","Matten"],
       tips:["Musikauswahl: ruhig â†’ lebhaft â†’ ruhig","ÃœbergÃ¤nge ankÃ¼ndigen","TÃ¼cher einsammeln als Ritual"]},
      {title:"Waldtier-Abenteuer",thema:"Fantasie Â· KÃ¶rperkoordination",
       timeline:[
         {t:"Geschichte einleiten",typ:"EinfÃ¼hrung",v:0,b:3,desc:"ErzÃ¤hlung: Wir gehen heute in den Wald! Was sehen wir? Kinder nennen Tiere.",mat:"Bildkarten Waldtiere (optional)"},
         {t:"Waldtiere erwachen",typ:"Warm-up",v:3,b:7,desc:"Igel rollt sich zusammen & streckt sich Â· Vogel flattert Â· Fuchs schleicht Â· Hase hÃ¼pft.",mat:null},
         {t:"Waldparcours",typ:"Hauptteil",v:7,b:16,desc:"Baumstamm (Balken) Ã¼berqueren Â· Ast ducken (Stab auf StÃ¼hlen) Â· HÃ¶hle (Tunnel) durchkrabbeln Â· Laubberg (Kissen) erklimmen.",mat:"Balancierbalken Â· Stab Â· 2 StÃ¼hle Â· Tunnel Â· 4 Kissen Â· Weichmatte"},
         {t:"Tiere schlafen ein",typ:"Abschluss",v:16,b:20,desc:"Alle Waldtiere machen ein Nickerchen. Auf Matten legen. Ruhige Naturmusik.",mat:"Matten Â· NaturgerÃ¤usche/Musik"}
       ],
       materials:["Balancierbalken","Stab + 2 StÃ¼hle","Kriechtunnel","4â€“6 Kissen","Weichmatte","Musik-Player"],
       tips:["Geschichte motiviert sehr","Parcours niedrig & sicher halten","Fantasiebild begleitet die ganze Einheit"]},
      {title:"Ball & KÃ¶rpergefÃ¼hl",thema:"KÃ¶rperwahrnehmung Â· Koordination",
       timeline:[
         {t:"BÃ¤lle kennenlernen",typ:"EinfÃ¼hrung",v:0,b:3,desc:"Verschiedene BÃ¤lle in der Mitte: groÃŸ, klein, weich, Igelball. Kinder nehmen sich einen.",mat:"Verschiedene BÃ¤lle (je 1 pro Kind)"},
         {t:"Rollen & Fangen",typ:"Warm-up",v:3,b:7,desc:"Ball hin und her rollen (Fachkraft â†” Kind). Dann zwischen 2 Kindern. Erst sitzend, dann kniend.",mat:"Weiche BÃ¤lle"},
         {t:"Stationen: Ball & KÃ¶rper",typ:"Hauptteil",v:7,b:16,desc:"Station 1: Igelball-Massage FÃ¼ÃŸe, HÃ¤nde, Arme (3 min) Â· Station 2: Ball im Gleichgewicht auf RÃ¼cken halten (3 min) Â· Station 3: Ball zielen â€“ Kiste treffen (3 min).",mat:"IgelbÃ¤lle Â· weiche BÃ¤lle Â· Kiste Â· Weichmatte"},
         {t:"BÃ¤lle weglegen & Stille",typ:"Abschluss",v:16,b:20,desc:"BÃ¤lle gemeinsam in Kiste legen. Auf Matten liegen. Arme & Beine strecken, ausatmen.",mat:"Kiste Â· Matten"}
       ],
       materials:["Verschiedene weiche BÃ¤lle","IgelbÃ¤lle (1 pro Kind)","Kiste (Ziel)","Weichmatte"],
       tips:["Igelball-Massage sehr beliebt & beruhigend","Station ohne Wettbewerb gestalten","Tempo ruhig halten"]},
      {title:"Sinnes-Entdeckungsreise",thema:"Sensorische Integration Â· Achtsamkeit",
       timeline:[
         {t:"Schuhe aus & EinfÃ¼hrung",typ:"EinfÃ¼hrung",v:0,b:3,desc:"Schuhe & Socken ausziehen. ErklÃ¤rung: Heute entdecken unsere FÃ¼ÃŸe und HÃ¤nde die Welt!",mat:null},
         {t:"Zehenwippen",typ:"Warm-up",v:3,b:7,desc:"Im Stehen: auf Zehenspitzen, dann Fersen. Wechseln. BarfuÃŸ auf verschiedenen Unterlagen stehen.",mat:"Teppich Â· Matte Â· Holzunterlage"},
         {t:"FÃ¼hlpfad & Tast-Stationen",typ:"Hauptteil",v:7,b:16,desc:"Station 1: BarfuÃŸ-Pfad â€“ Matte Â· Sandwanne Â· Tuch Â· Kieselsteinmatte (3 min) Â· Station 2: FÃ¼hlen mit HÃ¤nden â€“ Naturmaterialien ertasten (3 min) Â· Station 3: Igelball-Massage FÃ¼ÃŸe (3 min).",mat:"Sandwanne Â· Kieselsteinmatte Â· Naturmaterialien Â· IgelbÃ¤lle"},
         {t:"Entspannung & Socken anziehen",typ:"Abschluss",v:16,b:20,desc:"Ruhig auf Matten sitzen. FÃ¼ÃŸe reiben. Socken gemeinsam anziehen als ruhiges Ritual.",mat:"Matten"}
       ],
       materials:["Sandwanne","Kieselsteinmatte","Naturmaterialien (Zapfen, BlÃ¤tter, Steine)","IgelbÃ¤lle (1 pro Kind)","Weichmatte"],
       tips:["BarfuÃŸlaufen hat beruhigende Wirkung","Niemand muss Sandwanne betreten","Ritual Socken anziehen gibt Abschluss"]}
    ]
  },
  kindergarten: {
    15: [
      {title:"Reaktions-Kreis",thema:"Reaktion Â· TeamgefÃ¼hl",
       timeline:[
         {t:"Aufstellung & EinfÃ¼hrung",typ:"EinfÃ¼hrung",v:0,b:2,desc:"Alle im Kreis stehen. AufwÃ¤rm-Ritual: Arme schÃ¼tteln.",mat:null},
         {t:"Handdruck-Kreis",typ:"Warm-up",v:2,b:5,desc:"Impuls durch HÃ¤ndedruck im Kreis weitergeben. Wer zu frÃ¼h drÃ¼ckt, macht einen Hampelmann.",mat:null},
         {t:"Farben-Lauf + Freeze-Dance",typ:"Hauptteil",v:5,b:12,desc:"1. Farben-Lauf: Farbkarte hoch â†’ zur gleichfarbigen Matte rennen (4 min). 2. Freeze-Dance: Musik stoppt â†’ einfrieren (3 min).",mat:"4 Farbkarten Â· 4 farbige Matten Â· Musik-Player"},
         {t:"Abschlusskreis",typ:"Abschluss",v:12,b:15,desc:"Im Kreis: jedes Kind sagt ein Wort, was ihm SpaÃŸ gemacht hat. Gemeinsames Abklatschen.",mat:null}
       ],
       materials:["4 Farbkarten","4 farbige Matten","Musik-Player"],
       tips:["Freeze-Dance sehr motivierend","Farben vorher ansagen","Alle gewinnen â€“ kein Ausschluss"]},
      {title:"Balancier-Stars",thema:"Gleichgewicht Â· Konzentration",
       timeline:[
         {t:"Demo & EinfÃ¼hrung",typ:"EinfÃ¼hrung",v:0,b:2,desc:"Fachkraft balanciert Kissen auf Kopf. Kinder wollen sofort nachmachen.",mat:"Kissen (1 pro Kind)"},
         {t:"Einbeinstand",typ:"Warm-up",v:2,b:5,desc:"Auf einem Bein: 10 Sekunden. Andere Seite. Dann Augen zu.",mat:null},
         {t:"Balancier-Challenge",typ:"Hauptteil",v:5,b:12,desc:"1. Kissen auf Kopf â€“ Linie entlanggehen (3 min). 2. Auf Balancierbalken stehen & Ball fangen (4 min).",mat:"Kissen Â· Klebebandlinie Â· Balancierbalken Â· Ball"},
         {t:"Alle sind Stars",typ:"Abschluss",v:12,b:15,desc:"Jedes Kind bekommt Applaus. Gemeinsam verneigen. Entspannung: auf Boden legen.",mat:"Matten"}
       ],
       materials:["Kissen (1 pro Kind)","Klebeband (Linie)","Balancierbalken","Ball","Matten"],
       tips:["Kein Wettbewerb","Alle feiern","Schwierigkeitsgrad individuell anpassen"]},
      {title:"Zahlen-Bewegungs-Mix",thema:"Kognition & Motorik verbinden",
       timeline:[
         {t:"Zahlen-Bewegungen lernen",typ:"EinfÃ¼hrung",v:0,b:3,desc:"1=Klatschen Â· 2=Stampfen Â· 3=Drehen Â· 4=HÃ¼pfen Â· 5=Arme hoch. Gemeinsam Ã¼ben.",mat:"Zahlenkarten 1â€“5"},
         {t:"Karte zeigen",typ:"Warm-up",v:3,b:6,desc:"Fachkraft zeigt Karte â€“ alle fÃ¼hren Bewegung aus. Tempo steigern.",mat:"Zahlenkarten"},
         {t:"Zahlen-Staffel",typ:"Hauptteil",v:6,b:12,desc:"2 Teams. Fachkraft ruft Zahl â†’ 1. Kind jedes Teams: Bewegung ausfÃ¼hren + zu Linie laufen + zurÃ¼ck â†’ nÃ¤chstes Kind.",mat:"Zahlenkarten Â· Klebebandlinie"},
         {t:"Lieblingsbewegung",typ:"Abschluss",v:12,b:15,desc:"Jedes Kind zeigt seine Lieblingszahl-Bewegung. Alle machen nach. Gemeinsam ausatmen.",mat:null}
       ],
       materials:["Zahlenkarten 1â€“5","Klebeband"],
       tips:["Zahlenverbindung verankert kognitiv","Beide Teams gleichzeitig starten","Auf Fairness achten"]},
      {title:"Kooperations-Spiele",thema:"Teamwork Â· Vertrauen",
       timeline:[
         {t:"Wir-EinfÃ¼hrung",typ:"EinfÃ¼hrung",v:0,b:2,desc:"Heute gewinnen wir nur zusammen! Kein gegen â€“ nur miteinander.",mat:null},
         {t:"Spiegel-Paare",typ:"Warm-up",v:2,b:5,desc:"Paare stehen sich gegenÃ¼ber. Einer macht Bewegungen â€“ der andere spiegelt. Wechseln.",mat:null},
         {t:"Gruppenaufgaben",typ:"Hauptteil",v:5,b:12,desc:"1. Ball auf Decke transportieren ohne Fallen (4 min). 2. Menschenknoten lÃ¶sen (3 min).",mat:"Ball Â· groÃŸe Decke/Tuch"},
         {t:"Jubel-Kreis",typ:"Abschluss",v:12,b:15,desc:"HÃ¤nde in Kreis-Mitte stapeln. Gemeinsamer Jubel-Ruf. Dann ruhig ausatmen.",mat:null}
       ],
       materials:["Ball (1)","GroÃŸe Decke oder Tuch"],
       tips:["Kooperation explizit benennen & loben","Konkurrenz vermeiden","Misserfolg gemeinsam annehmen"]},
      {title:"Seilsprung & Rhythmus",thema:"Koordination Â· RhythmusgefÃ¼hl",
       timeline:[
         {t:"Demo & Warm-up",typ:"EinfÃ¼hrung",v:0,b:3,desc:"Fachkraft zeigt Seilspringen. Alle hÃ¼pfen ohne Seil: beidbeinig, einbeinig, drehend.",mat:"Sprungseile"},
         {t:"Seil-Ãœbungen",typ:"Warm-up",v:3,b:6,desc:"Seil auf Boden: beidbeinig drÃ¼ber springen, rÃ¼ckwÃ¤rts. Wer kann das Seil schon schwingen?",mat:"Sprungseile (1 pro Kind)"},
         {t:"Springen & Langseil",typ:"Hauptteil",v:6,b:12,desc:"Einzelspringen mit eigenem Seil (3 min). Dann Langseil: Fachkraft schwingt â€“ Kinder springen rein (3 min).",mat:"Sprungseile (1 pro Kind) Â· Langseil (1)"},
         {t:"Seil-Kreis",typ:"Abschluss",v:12,b:15,desc:"Alle halten gemeinsam das Langseil im Kreis. Zusammen heben & senken. Ruhig ausklingen.",mat:"Langseil"}
       ],
       materials:["Sprungseile (1 pro Kind)","Langseil (1)"],
       tips:["Boden-Variante fÃ¼r AnfÃ¤nger","Langseil fÃ¶rdert GruppengefÃ¼hl","Kein Auslachen bei Fehlern"]}
    ],
    30: [
      {title:"Bewegungs-Olympiade",thema:"Vielfalt Â· Ausdauer Â· Fairness",
       timeline:[
         {t:"ErÃ¶ffnung & Teams",typ:"EinfÃ¼hrung",v:0,b:5,desc:"Teams bilden (je 3â€“5 Kinder), Farben zuweisen. Kurze ErklÃ¤rung der 4 Stationen.",mat:"Farbige ArmbÃ¤nder oder TÃ¼cher"},
         {t:"Warm-up: Olympisches Feuer",typ:"Warm-up",v:5,b:9,desc:"Kind trÃ¤gt Fackel (Tuch am Stab) durch Raum â€“ alle wÃ¤rmen sich auf.",mat:"Stab mit Tuch"},
         {t:"Stationen-Olympiade",typ:"Hauptteil",v:9,b:24,desc:"Station 1: Weitwurf Sandsack (4 min) Â· Station 2: Hindernislauf (4 min) Â· Station 3: Zielwerfen (4 min) Â· Station 4: Balancier-Wettbewerb (3 min). Signalwechsel alle 4 min.",mat:"SandsÃ¤cke Â· Hindernismaterial Â· Zielkorb Â· Balancierbalken"},
         {t:"Siegerehrung & Abschluss",typ:"Abschluss",v:24,b:30,desc:"Alle bekommen Medaille. Gemeinsame Entspannung auf Matten.",mat:"Papiermedaillen Â· Matten"}
       ],
       materials:["Farbige TÃ¼cher","Stab + Tuch","SandsÃ¤cke (5)","Hindernismaterial","Zielkorb","Balancierbalken","Papiermedaillen","Matten"],
       tips:["Fokus auf Teilnahme, nicht Sieg","Teams ausgewogen einteilen","Applaus fÃ¼r jeden Versuch"]},
      {title:"Tanztheater: Dschungel",thema:"KreativitÃ¤t Â· Ausdruck Â· Sprache",
       timeline:[
         {t:"Rollen verteilen",typ:"EinfÃ¼hrung",v:0,b:5,desc:"Dschungel-Geschichte vorstellen. Kinder wÃ¤hlen Tier: LÃ¶we, Elefant, Affe, Schlange, Vogel.",mat:"Tier-Bildkarten"},
         {t:"Tiere erwachen",typ:"Warm-up",v:5,b:9,desc:"Jedes Tier erwacht: LÃ¶we streckt sich Â· Elefant rÃ¼sselt Â· Affe springt Â· Schlange gleitet.",mat:null},
         {t:"Tanztheater-AuffÃ¼hrung",typ:"Hauptteil",v:9,b:24,desc:"Fachkraft erzÃ¤hlt Geschichte â€“ Kinder agieren. 2 DurchlÃ¤ufe mit Rollentausch Ã  ~7 min.",mat:"Musik-Player Â· KostÃ¼m-Accessoires (optional)"},
         {t:"Verbeugung & GesprÃ¤ch",typ:"Abschluss",v:24,b:30,desc:"Alle verbeugen sich. Frage: Welche Rolle war deine Lieblings-Rolle? Entspannung.",mat:"Matten"}
       ],
       materials:["Tier-Bildkarten","Musik-Player","KostÃ¼m-Accessoires (optional)","Matten"],
       tips:["Geschichte kurz & bildlich halten","SchÃ¼chterne Kinder sanft einladen","KreativitÃ¤t > Perfektion"]},
      {title:"Ball-Meisterschaft",thema:"BallgefÃ¼hl Â· Koordination Â· Teamspiel",
       timeline:[
         {t:"Freies Erkunden",typ:"EinfÃ¼hrung",v:0,b:5,desc:"Jedes Kind nimmt Ball. Freies Erkunden: prellen, rollen, hochwerfen, fangen.",mat:"BÃ¤lle (1 pro Kind)"},
         {t:"Warm-up: Dribbling",typ:"Warm-up",v:5,b:9,desc:"Ball am Ort prellen â†’ im Laufen â†’ Handwechsel â†’ Tempo variieren.",mat:"BÃ¤lle"},
         {t:"Ball-Spiel-Stationen",typ:"Hauptteil",v:9,b:24,desc:"Station 1: Zielwerfen in Kisten (4 min) Â· Station 2: Staffel mit Ball zwischen Knien (4 min) Â· Station 3: Mini-VÃ¶lkerball (4 min) Â· Station 4: Freies Ballspiel (3 min).",mat:"BÃ¤lle Â· Kisten (3) Â· Klebebandfeld"},
         {t:"Ball-Entspannung",typ:"Abschluss",v:24,b:30,desc:"Ball unter RÃ¼cken legen: sanft hin- und herrollen (Massage). Dann ruhig liegen.",mat:"BÃ¤lle Â· Matten"}
       ],
       materials:["BÃ¤lle (1 pro Kind)","Kisten (3)","Klebeband","Matten"],
       tips:["VÃ¶lkerball sanft & fair","Ball-Massage entspannt gut","Alle Levels einbeziehen"]},
      {title:"Forscher-Parcours",thema:"Grobmotorik Â· Fantasie Â· Entdeckergeist",
       timeline:[
         {t:"Naturforscher werden",typ:"EinfÃ¼hrung",v:0,b:4,desc:"Jedes Kind bekommt Papier-Lupe. Heute sind wir Naturforscher! Kurze Parcours-ErklÃ¤rung.",mat:"Papier-Lupen (gebastelt)"},
         {t:"Warm-up: Waldtiere",typ:"Warm-up",v:4,b:8,desc:"Hirsch (aufrecht laufen) Â· Eule (Kopf drehen) Â· Fuchs (schleichen) Â· Reh (springen).",mat:null},
         {t:"Forscher-Parcours",typ:"Hauptteil",v:8,b:24,desc:"Station 1: Baumstamm (Balken, 4 min) Â· Station 2: BÃ¤renhÃ¶hle (Tunnel, 4 min) Â· Station 3: BergÃ¼berquerung (Kissen-Turm, 4 min) Â· Station 4: Fluss (Sprungpunkte, 4 min). Kinder rotieren.",mat:"Balancierbalken Â· Kriechtunnel Â· 6 Kissen Â· Papierkreise (10)"},
         {t:"Forscher-Tagebuch",typ:"Abschluss",v:24,b:30,desc:"Jedes Kind zeichnet Lieblingsstrecke. Kurzes ErzÃ¤hlen. Entspannung.",mat:"Papier Â· Stifte"}
       ],
       materials:["Papier-Lupen","Balancierbalken","Kriechtunnel","6 Kissen","Papierkreise (10)","Papier + Stifte"],
       tips:["Forscher-Rolle motiviert sehr","Zeichnen verankert Erlebnis","DrauÃŸen-Version im Sommer ideal"]},
      {title:"Gemeinschaftsspiel: Wir schaffen es",thema:"Soziale Kompetenz Â· Inklusion",
       timeline:[
         {t:"Gruppen-Name finden",typ:"EinfÃ¼hrung",v:0,b:5,desc:"Alle im Kreis. Gemeinsamen Gruppen-Namen wÃ¤hlen. Alle sagen ihn laut.",mat:null},
         {t:"Bewegungs-Telefon",typ:"Warm-up",v:5,b:9,desc:"Wie Stille Post mit Bewegung: Bewegung von Kind zu Kind weiterfÃ¼hren.",mat:null},
         {t:"Kooperations-Spiele",typ:"Hauptteil",v:9,b:24,desc:"1. Menschenknoten lÃ¶sen (5 min) Â· 2. Alle auf StÃ¼hle ohne Boden zu berÃ¼hren (5 min) Â· 3. Gemeinsame KÃ¶rperfigur legen (5 min).",mat:"StÃ¼hle (1 pro Kind)"},
         {t:"Wir-Abschluss",typ:"Abschluss",v:24,b:30,desc:"Gemeinsame Pose aufbauen. Optional: Foto. NachgesprÃ¤ch: Was hat gut geklappt?",mat:"Kamera (optional)"}
       ],
       materials:["StÃ¼hle (1 pro Kind)","Kamera (optional)"],
       tips:["Kein Kind ausgrenzen","LÃ¶sungen kommen von den Kindern","KÃ¶rperfiguren sind kreativ & verbindend"]}
    ],
    45: [
      {title:"GroÃŸes Bewegungsfest",thema:"Ausdauer Â· Vielfalt Â· Gemeinschaft",
       timeline:[
         {t:"ErÃ¶ffnung & AufwÃ¤rmspiel",typ:"EinfÃ¼hrung",v:0,b:7,desc:"Gemeinsames Warm-up im Kreis: Hampelmann, Kniebeugen, Arme schwingen. Dann freies Laufen mit Richtungswechsel auf Zuruf.",mat:null},
         {t:"Warm-up: Staffel-Warm-up",typ:"Warm-up",v:7,b:12,desc:"2 Teams laufen abwechselnd zur Wand und zurÃ¼ck â€“ je mit anderer Fortbewegungsart: hÃ¼pfen, schleichen, rÃ¼ckwÃ¤rts.",mat:"Klebebandlinie"},
         {t:"Stationen-Runde 1",typ:"Hauptteil",v:12,b:25,desc:"Station A: Hindernislauf (4 min) Â· Station B: Zielwerfen (4 min) Â· Station C: Balance-Weg (4 min) Â· Station D: Sprungseil (4 min). Pause nach jeder Runde (1 min).",mat:"Hindernismaterial Â· SandsÃ¤cke Â· Balancierbalken Â· Sprungseile"},
         {t:"Stationen-Runde 2",typ:"Hauptteil",v:25,b:38,desc:"Teams rotieren zu den anderen Stationen. Jedes Team absolviert alle 4 Stationen.",mat:"(dieselbe Ausstattung)"},
         {t:"Abschluss & Ausklang",typ:"Abschluss",v:38,b:45,desc:"Alle zusammen im Kreis: leichtes Dehnen, Sternpose halten, Ruheatmung (2 min). Kurzes GesprÃ¤ch: Was war heute das Highlight?",mat:"Matten"}
       ],
       materials:["Hindernismaterial (Pylonen, StÃ¤be)","SandsÃ¤cke (5)","Balancierbalken","Sprungseile (1 pro Kind)","Klebeband","Matten"],
       tips:["Stationen gut aufbauen vor Beginn","Pausen zwischen Runden einplanen","Auf Hydration achten bei lÃ¤ngerer Einheit"]},
      {title:"Sport-Olympiade Junior",thema:"Koordination Â· Wettkampfgeist Â· Fair Play",
       timeline:[
         {t:"ErÃ¶ffnung & Team-Findung",typ:"EinfÃ¼hrung",v:0,b:8,desc:"Teams per Los bilden (3â€“4 Kinder). Teamfarbe und Teamname bestimmen. Jedes Team stellt sich vor.",mat:"Farbige TÃ¼cher Â· Sticker"},
         {t:"Gemeinsames AufwÃ¤rmen",typ:"Warm-up",v:8,b:14,desc:"Alle gemeinsam: Laufen im Kreis â†’ seitlicher Galopp â†’ Knieheben â†’ Armkreisen. 3 Runden.",mat:null},
         {t:"Olympiade-Disziplinen",typ:"Hauptteil",v:14,b:35,desc:"Disziplin 1: Weitwurf Sandsack (5 min) Â· Disziplin 2: 50m-Sprint (5 min) Â· Disziplin 3: Hochsprung (Latte, 5 min) Â· Disziplin 4: Zielwerfen KÃ¶rbe (6 min).",mat:"SandsÃ¤cke Â· Messband Â· Weichbodenmatte Â· BÃ¤lle Â· KÃ¶rbe"},
         {t:"Siegerehrung",typ:"Abschluss",v:35,b:45,desc:"Alle sind Gewinner! MedaillenÃ¼bergabe fÃ¼r alle. Gemeinsames Foto. Entspannung auf Matten.",mat:"Papiermedaillen Â· Kamera Â· Matten"}
       ],
       materials:["Farbige TÃ¼cher","SandsÃ¤cke (5)","Messband","Weichbodenmatte","BÃ¤lle (6)","KÃ¶rbe (2)","Papiermedaillen","Matten"],
       tips:["Fair Play explizit als Wert benennen","Ergebnisse nicht vergleichen","Jedes Kind hat einen StÃ¤rkenmoment"]},
      {title:"KÃ¶rper & Geist: Yoga-Abenteuer",thema:"Achtsamkeit Â· Koordination Â· Entspannung",
       timeline:[
         {t:"Ankommen & AtemÃ¼bung",typ:"EinfÃ¼hrung",v:0,b:7,desc:"Alle auf Matten. Augen zu. 5 tiefe AtemzÃ¼ge. KÃ¶rper von Kopf bis FuÃŸ wahrnehmen.",mat:"Matten (1 pro Kind)"},
         {t:"Tier-Yoga Warm-up",typ:"Warm-up",v:7,b:14,desc:"Katze-Kuh Â· AbwÃ¤rtshund Â· Kobra Â· Baum Â· Krieger. Jede Pose 5 AtemzÃ¼ge halten.",mat:"Matten"},
         {t:"Yoga-Parcours",typ:"Hauptteil",v:14,b:32,desc:"Station A: Partner-Yoga (Baum zu zweit, 5 min) Â· Station B: Gleichgewichtspfad barfuÃŸ (5 min) Â· Station C: Atemspiel â€“ Kerze pusten (5 min) Â· Station D: KÃ¶rper-Skulpturen im Team (5 min).",mat:"Matten Â· Klebebandlinie Â· Kerzen (Papier) Â· TÃ¼cher"},
         {t:"Yoga-Nidra Entspannung",typ:"Abschluss",v:32,b:45,desc:"Alle in Savasana (flach auf RÃ¼cken). Fachkraft fÃ¼hrt durch kurze gefÃ¼hrte Entspannung (8 min). Leise Musik.",mat:"Matten Â· Musik-Player"}
       ],
       materials:["Matten (1 pro Kind)","Klebeband","Papier-Kerzen","TÃ¼cher","Musik-Player"],
       tips:["Entspannung am Ende ist Gold wert","Kinder mÃ¼ssen Posen nicht perfekt ausfÃ¼hren","Ruhige AtmosphÃ¤re bewahren"]},
      {title:"Mannschaftsspiel-Marathon",thema:"Teamdynamik Â· Strategie Â· Kommunikation",
       timeline:[
         {t:"Kennenlernen & Teams",typ:"EinfÃ¼hrung",v:0,b:8,desc:"Kennenlernen-Spiel: Alle laufen, auf Zuruf finden sich Gruppen zusammen (Schuhfarbe, Lieblingstier etc.).",mat:null},
         {t:"Koordiniertes AufwÃ¤rmen",typ:"Warm-up",v:8,b:14,desc:"Team-Warm-up: alle halten sich an Schultern und machen gemeinsam Kniebeugen, SeitwÃ¤rtsschritte.",mat:null},
         {t:"Mannschaftsspiele",typ:"Hauptteil",v:14,b:36,desc:"Spiel 1: Eierlauf mit LÃ¶ffel (Team) (7 min) Â· Spiel 2: Staffel rÃ¼ckwÃ¤rts (7 min) Â· Spiel 3: Zeitlupenrennen (5 min) Â· Spiel 4: Kooperativer Hindernislauf (7 min).",mat:"LÃ¶ffel Â· TischtennisbÃ¤lle Â· Hindernismaterial"},
         {t:"Auswertung & Entspannung",typ:"Abschluss",v:36,b:45,desc:"Im Kreis sitzen: Was hat unser Team ausgemacht? Jeder nennt eine StÃ¤rke eines Mitspielers. Abschluss-Strecken.",mat:null}
       ],
       materials:["LÃ¶ffel (1 pro Kind)","TischtennisbÃ¤lle","Hindernismaterial (Pylonen)","Klebebandlinien"],
       tips:["Zeitlupenrennen sehr wirkungsvoll","WertschÃ¤tzung explizit ansprechen","Alle Spiele ohne Ausscheidung"]},
      {title:"Kreativ-Bewegungs-Werkstatt",thema:"KreativitÃ¤t Â· freier Ausdruck Â· Improvisation",
       timeline:[
         {t:"Improvisations-Warm-up",typ:"EinfÃ¼hrung",v:0,b:8,desc:"Bewegung zu Musik: Fachkraft stoppt Musik â€“ alle frieren in Pose ein. Dann: Welche Figur macht dein KÃ¶rper?",mat:"Musik-Player"},
         {t:"KÃ¶rper als Instrument",typ:"Warm-up",v:8,b:15,desc:"Klatschen, Stampfen, Pfeifen, Zungenschnalzen: Eigenes KÃ¶rper-Instrument-Orchester bauen.",mat:null},
         {t:"Kreativ-Stationen",typ:"Hauptteil",v:15,b:36,desc:"Station A: Schattentheater (Wand + Lampe, 7 min) Â· Station B: Tanz-Komposition zu zweit erfinden (7 min) Â· Station C: Bewegungsgeschichte schreiben & auffÃ¼hren (7 min).",mat:"Lampe Â· weiÃŸes Tuch Â· Musik-Player"},
         {t:"Galerie & PrÃ¤sentation",typ:"Abschluss",v:36,b:45,desc:"Jede Gruppe zeigt ihr Werk. Applaus. Abschluss-Reflexion: Was habe ich heute Neues ausprobiert?",mat:null}
       ],
       materials:["Musik-Player","Lampe (Taschenlampe)","WeiÃŸes Tuch (Leinwand)","Klebeband"],
       tips:["Kein Richtig/Falsch bei KreativitÃ¤t","Auch das VerrÃ¼ckte loben","Kinder Ã¼berraschen mit ihrer Fantasie"]}
    ],
    60: [
      {title:"Sporttag in der Kita",thema:"Ausdauer Â· Wettkampf Â· Gemeinschaft",
       timeline:[
         {t:"ErÃ¶ffnungsfeier",typ:"EinfÃ¼hrung",v:0,b:10,desc:"Feierlicher Einmarsch der Teams. Team-Vorstellung. Gemeinsames Warm-up: Joggen im Kreis, DehnÃ¼bungen.",mat:"Farbige TÃ¼cher Â· Musik-Player"},
         {t:"Disziplin-Block 1",typ:"Hauptteil",v:10,b:25,desc:"Sprint (3 LÃ¤ufe pro Kind) Â· Weitwurf Sandsack Â· Zielwerfen.",mat:"Messband Â· SandsÃ¤cke Â· KÃ¶rbe"},
         {t:"Pause & StÃ¤rkung",typ:"Warm-up",v:25,b:30,desc:"Kurze Pause mit Wasser & kleiner StÃ¤rkung (Obst). Locker laufen und ausschÃ¼tteln.",mat:"Wasser Â· Obst"},
         {t:"Disziplin-Block 2",typ:"Hauptteil",v:30,b:50,desc:"Hindernislauf (komplex, 2 DurchlÃ¤ufe) Â· Staffel-Variationen (3 Staffeln) Â· Kooperativer Parcours.",mat:"Hindernismaterial Â· StaffelstÃ¤be Â· Pylonen"},
         {t:"Siegerehrung & Fest-Abschluss",typ:"Abschluss",v:50,b:60,desc:"Alle sind Sieger. Medaillen fÃ¼r alle. Gemeinsames Foto. Ausklang mit ruhiger Musik.",mat:"Papiermedaillen Â· Kamera Â· Matten Â· Musik-Player"}
       ],
       materials:["Farbige TÃ¼cher","Musik-Player","Messband","SandsÃ¤cke (6)","KÃ¶rbe (3)","Wasser","Obst","Hindernismaterial","StaffelstÃ¤be","Pylonen","Papiermedaillen","Kamera","Matten"],
       tips:["Wasser-Pause obligatorisch","Stationen vorher aufbauen","Alle Kinder in allen Disziplinen starten"]},
      {title:"WaldpÃ¤dagogik drinnen",thema:"Naturverbundenheit Â· Ganzheitliche Motorik",
       timeline:[
         {t:"Wald-Einstieg & Rollen",typ:"EinfÃ¼hrung",v:0,b:10,desc:"Naturforscher-Kontext aufbauen. Rollen verteilen: WaldhÃ¼ter, Tiere, Forscher. Jeder hat eine Lupe.",mat:"Papier-Lupen Â· Tier-Karten"},
         {t:"Wald-Warm-up",typ:"Warm-up",v:10,b:18,desc:"Tierspaziergang mit allen Waldtieren. Jedes Kind fÃ¼hrt 'sein' Tier vor. Dann alle machen nach.",mat:null},
         {t:"Wald-Parcours 1: Erkunden",typ:"Hauptteil",v:18,b:33,desc:"Station 1: Baumstamm (Balken) Â· Station 2: BachÃ¼berquerung (Sprungpunkte) Â· Station 3: HÃ¶hle (Tunnel) Â· Station 4: Berg (Kissen-Turm). Jede Station 3 min.",mat:"Balancierbalken Â· Papierkreise Â· Tunnel Â· 8 Kissen"},
         {t:"Wald-Parcours 2: Aufgaben",typ:"Hauptteil",v:33,b:50,desc:"Station A: NÃ¼sse sammeln (BÃ¤lle in KÃ¶rbe werfen) Â· Station B: Tierbau bauen (Weichschaum) Â· Station C: Waldmusik (KÃ¶rperinstrumente im Rhythmus).",mat:"BÃ¤lle Â· KÃ¶rbe Â· Weichschaum-Bausteine"},
         {t:"Lagerfeuer-Abschluss",typ:"Abschluss",v:50,b:60,desc:"Alle sitzen im Kreis (Lagerfeuer-Ritual). Jedes Kind erzÃ¤hlt seinen schÃ¶nsten Wald-Moment. Stilles Sitzen. Leise Natur-Musik.",mat:"Musik-Player (NaturgerÃ¤usche)"}
       ],
       materials:["Papier-Lupen","Tier-Karten","Balancierbalken","Papierkreise (12)","Tunnel","8 Kissen","BÃ¤lle","KÃ¶rbe (3)","Weichschaum-Bausteine","Musik-Player"],
       tips:["Fantasie-Rahmen sehr motivierend","Naturbezug kognitiv stÃ¤rken","Abschluss-Ritual besonders wertvoll"]},
      {title:"Zirkus der Bewegung",thema:"Artistik Â· Mut Â· Ausdruck",
       timeline:[
         {t:"Zirkus-ErÃ¶ffnung",typ:"EinfÃ¼hrung",v:0,b:10,desc:"Zirkus-AtmosphÃ¤re schaffen: Musik, bunte TÃ¼cher. Jedes Kind wÃ¤hlt eine Zirkus-Rolle: Akrobat, Jongleur, Artist, Clown.",mat:"Musik-Player Â· bunte TÃ¼cher Â· Zeitschriften-HÃ¼te (optional)"},
         {t:"Zirkus-Warm-up",typ:"Warm-up",v:10,b:18,desc:"Akrobaten dehnen sich Â· Jongleure schmeiÃŸen TÃ¼cher Â· Artisten balancieren Â· Clowns stolpern komisch.",mat:"TÃ¼cher Â· Kissen"},
         {t:"Zirkus-Nummern-Block 1",typ:"Hauptteil",v:18,b:35,desc:"Nummer 1: BalancierkÃ¼nstler (Balancierbalken, Kissen auf Kopf, 8 min) Â· Nummer 2: Jonglage (TÃ¼cher, BÃ¤lle, 9 min).",mat:"Balancierbalken Â· Kissen Â· TÃ¼cher Â· BÃ¤lle"},
         {t:"Zirkus-Nummern-Block 2",typ:"Hauptteil",v:35,b:50,desc:"Nummer 3: Partnerakrobatik (sichere Ãœbungen zu zweit, 8 min) Â· Nummer 4: Clown-Staffel (mit SchlapphÃ¼ten und Schritten, 7 min).",mat:"Weichmatten Â· HÃ¼te (optional) Â· Musik-Player"},
         {t:"Zirkus-Vorstellung & Abschluss",typ:"Abschluss",v:50,b:60,desc:"Jede Gruppe zeigt ihre Nummer. Applaus! Verbeugen. Ruhige Entspannung auf Matten.",mat:"Matten Â· Musik-Player"}
       ],
       materials:["Musik-Player","Bunte TÃ¼cher","Balancierbalken","Kissen (6)","BÃ¤lle (6)","Weichmatten","HÃ¼te (optional)"],
       tips:["Zirkus-Kontext sehr motivierend","Partnerakrobatik sichern!","Clown-Elemente senken Hemmschwelle"]},
      {title:"GroÃŸ-Kooperationsprojekt",thema:"Soziale Intelligenz Â· ProblemlÃ¶sung Â· Zusammenhalt",
       timeline:[
         {t:"Projekt-EinfÃ¼hrung",typ:"EinfÃ¼hrung",v:0,b:10,desc:"Aufgabe vorstellen: Gemeinsam ein 'Schloss' aus KÃ¶rpern und Materialien bauen â€“ alle mÃ¼ssen mitwirken. Teams bilden.",mat:null},
         {t:"Team-Warm-up",typ:"Warm-up",v:10,b:18,desc:"Team-VertrauensÃ¼bungen: RÃ¼cken-an-RÃ¼cken aufstehen Â· Blinde FÃ¼hrung Â· Synchrone Bewegungen.",mat:null},
         {t:"Bau-Phase",typ:"Hauptteil",v:18,b:38,desc:"Teams bauen Strukturen aus Weichschaum-Bausteinen, Matten, TÃ¼chern. Bewegungselemente integrieren: durchkrabbeln, draufklettern, balancieren.",mat:"Weichschaum-Bausteine (20) Â· Matten Â· TÃ¼cher Â· Klebeband"},
         {t:"Bewohner-Test & Parcours",typ:"Hauptteil",v:38,b:50,desc:"Jedes Team besucht das Schloss des anderen und absolviert den Parcours. Feedback geben.",mat:"(fertige Strukturen)"},
         {t:"Reflexion & AufrÃ¤umen",typ:"Abschluss",v:50,b:60,desc:"Im Kreis: Was hat unser Team besonders gut gemacht? Was wÃ¼rden wir nÃ¤chstes Mal anders machen? Gemeinsames AufrÃ¤umen als Ritual.",mat:null}
       ],
       materials:["Weichschaum-Bausteine (20+)","Matten (8)","TÃ¼cher (6)","Klebeband"],
       tips:["KreativitÃ¤t unbedingt loben","AufrÃ¤umen als gemeinschaftliche Aufgabe","Reflexionsrunde wertvoll fÃ¼r Soziales Lernen"]},
      {title:"Thementag: Weltreise in Bewegung",thema:"Kulturelle Vielfalt Â· Weltkunde Â· Motorik",
       timeline:[
         {t:"Reise-Einstieg & Tickets",typ:"EinfÃ¼hrung",v:0,b:10,desc:"Kinder bekommen Reise-'PÃ¤sse' (Papier). Erster Stopp: Deutschland (Warm-up). Reise-Karte an Wand.",mat:"Papier-PÃ¤sse Â· Weltkarte (Poster) Â· Musik"},
         {t:"Station Europa: Warm-up",typ:"Warm-up",v:10,b:18,desc:"Deutschland: Hampelmann-Reihe Â· Ã–sterreich: Walzer-Schritte Â· Italien: Tarantella-HÃ¼pfen.",mat:"Musik-Player"},
         {t:"Station Afrika & Amerika",typ:"Hauptteil",v:18,b:35,desc:"Afrika: Trommeln & Stampf-Rhythmus (8 min) Â· SÃ¼damerika: Salsa-Bewegungen & HÃ¼ftschwingen (9 min).",mat:"Trommeln Â· Rasseln Â· Musik-Player"},
         {t:"Station Asien & Ozeanien",typ:"Hauptteil",v:35,b:50,desc:"Japan: Tai-Chi-Arme langsam Â· Australien: KÃ¤nguru-HÃ¼pfen & Bumerang-Wurf (Sandsack) Â· Indien: Yoga-Posen.",mat:"SandsÃ¤cke Â· Matten Â· Musik-Player"},
         {t:"RÃ¼ckkehr & Abschluss",typ:"Abschluss",v:50,b:60,desc:"Alle zurÃ¼ck in Deutschland. Was hat euch gefallen? Pass abstempeln. Entspannung auf Matten.",mat:"Stempel Â· Tinte Â· Matten Â· Musik-Player"}
       ],
       materials:["Papier-PÃ¤sse (1 pro Kind)","Weltkarte-Poster","Musik-Player (Weltmusik)","Trommeln (2â€“3)","Rasseln","SandsÃ¤cke (4)","Matten","Stempel + Tinte"],
       tips:["Weltmusik vorher vorbereiten","Kulturelle Neugier wecken ohne Klischees","PÃ¤sse stempeln sehr motivierend"]}
    ]
  }
};

function matMitKinder(m,k){
  return m.includes('pro Kind') ? m.replace(/\(.*?\)/,'').trim()+` (${k}Ã—)` : m;
}

function generate(){
  document.getElementById('gen-status').className='';
  const k = parseInt(document.getElementById('kinderAnzahl').value);
  const key = `${curBereich}_${curDauer}`;
  const pool = T[curBereich]?.[curDauer];
  if(!pool){
    document.getElementById('gen-status').textContent='âš ï¸ Keine Vorlagen gefunden.';
    document.getElementById('gen-status').className='error'; return;
  }
  if(!counters[key]) counters[key]=0;
  const btn=document.getElementById('generateBtn');
  btn.disabled=true; btn.classList.add('loading');
  document.getElementById('btnText').textContent='Generiereâ€¦';

  setTimeout(()=>{
    const idx=counters[key]%pool.length;
    counters[key]++;
    const tpl=pool[idx];
    const bl=curBereich==='krippe'?'ğŸ¼ Krippe':'ğŸ’ Kindergarten';

    let html=`
      <div class="r-card">
        <div class="r-card-title">ğŸ“‹ Ãœbersicht</div>
        <div class="meta-row">
          <div class="meta-chip"><div class="val">${bl}</div><div class="key">Bereich</div></div>
          <div class="meta-chip"><div class="val">${curDauer} min</div><div class="key">Dauer</div></div>
          <div class="meta-chip"><div class="val">${k}</div><div class="key">Kinder</div></div>
          <div class="meta-chip"><div class="val">${tpl.thema}</div><div class="key">Schwerpunkt</div></div>
        </div>
      </div>
      <div class="r-card">
        <div class="r-card-title">ğŸ’ Material (fÃ¼r ${k} Kinder)</div>
        <div class="mat-wrap">
          ${tpl.materials.map(m=>`<span class="mat-chip">ğŸ“¦ ${matMitKinder(m,k)}</span>`).join('')}
        </div>
      </div>
      <div class="r-card">
        <div class="r-card-title">â± Ablauf</div>`;

    for(const s of tpl.timeline){
      html+=`
        <div class="tl-item">
          <div class="tl-time">${s.v}â€“${s.b} min</div>
          <div class="tl-body">
            <div class="tl-name">${s.t}</div>
            <span class="tl-badge">${s.typ}</span>
            ${s.mat?`<div class="tl-mat">ğŸ“¦ ${s.mat}</div>`:''}
            <div class="tl-desc">${s.desc}</div>
          </div>
        </div>`;
    }
    html+=`</div>`;

    if(tpl.tips?.length){
      html+=`<div class="r-card"><div class="r-card-title">ğŸ’¡ Praxis-Tipps</div>`;
      for(const t of tpl.tips) html+=`<div class="tip-item"><span>ğŸ’¡</span><span>${t}</span></div>`;
      html+=`</div>`;
    }

    const q=QUOTES[qIdx++%QUOTES.length];
    html+=`
      <div class="closing-quote">
        <blockquote>â€${q.text}"</blockquote>
        <div class="q-author">â€” ${q.author}</div>
      </div>`;

    document.getElementById('result-content').innerHTML=html;
    document.getElementById('result-title').textContent=tpl.title;
    document.getElementById('result').style.display='block';
    document.getElementById('gen-status').textContent=`âœ… Vorlage ${idx+1} von ${pool.length} Â· nÃ¤chste: ${(idx+1)%pool.length+1}`;
    document.getElementById('gen-status').className='success';
    btn.disabled=false; btn.classList.remove('loading');
    document.getElementById('btnText').textContent='â–¶ Bewegungseinheit generieren';
    document.getElementById('result').scrollIntoView({behavior:'smooth'});
  }, 500);
}
</script>
</body>
</html>
